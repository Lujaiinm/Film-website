<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="style.css">
    <title>Findyourmovie</title>
</head>
<body>
    <h1>
        WELCOME
        <br>
        Find Your Movie And Download It!
    </h1>

<div class="inputGroup">
    <input id="movieInput" type="text" required="" autocomplete="off">
    <label for="name">movie</label>
</div>

<br>
   <p>Just Press!</p>

    <button class="button" onclick="myFunction()">
  <svg
    stroke-linejoin="round"
    stroke-linecap="round"
    fill="none"
    stroke="currentColor"
    stroke-width="1.5"
    viewBox="0 0 24 24"
    height="40"
    width="40"
    class="button__icon"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path fill="none" d="M0 0h24v24H0z" stroke="none"></path>
    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
    <path d="M7 11l5 5l5 -5"></path>
    <path d="M12 4l0 12"></path>
  </svg>
  <span class="button__text">Download</span>
</button>
<div id="result"></div>


</body>

<script>

function myFunction() {
  var request = new XMLHttpRequest();
  var userInput = document.getElementById("movieInput").value;
  userInput = userInput.toLowerCase().replace(/\s+/g, "-");

request.open("GET", "https://yts.mx/movies/" + userInput, true);  // last parameter must be true
request.responseType = "document";
request.onload = function (e) {
  if (request.readyState === 4) {
    if (request.status === 200) {
      var a = request.responseXML.querySelector("p.hidden-md.hidden-lg");
      var links = a.querySelectorAll("a");
      links.forEach(link => {
        console.log(link.href);
        
    });    
// Build HTML string of anchor tags
      let outputHTML = "";
      links.forEach(link => {
        outputHTML += `<a href="${link.href}" target="_blank">${link.href}</a><br>`;
      });

      // Set the innerHTML to show the links
      document.getElementById("result").innerHTML = outputHTML;
    } else {
      console.error(request.status, request.statusText);
    }
  }
};
request.onerror = function (e) {
  console.error(request.status, request.statusText);
};
request.send(null);  // not a POST request, so don't send extra data
// Close the connection
}

</script>
</html>